
<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=0">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-touch-fullscreen" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <meta name="MobileOptimized" content="320">
  <title>COS跳转网关</title>
  <style>
    body {
      margin: 0;
      padding: 0;
      font-family: Arial, sans-serif;
      background-color: #f5f5f5;
      position: relative;
      overflow: hidden;
    }
    .container {
      width: 100px;
      height: 100px;
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      animation: rotate-move 2s ease-in-out infinite;
    }
    .dot {
      width: 15px;
      height: 15px;
      border-radius: 50%;
      background-color: #000;
      position: absolute;
      top: 0;
      bottom: 0;
      left: 0;
      right: 0;
      margin: auto;
    }
    .dot-3 { background-color: #9b59b6; }
    .dot-2 { background-color: #a683cc; }
    .dot-1 { background-color: #d7bde2; }
    .dot-3 { animation: dot-3-move 2s ease infinite; }
    .dot-2 { animation: dot-2-move 2s ease infinite; }
    .dot-1 { animation: dot-1-move 2s ease infinite; }

    @keyframes dot-3-move {
      20% { transform: scale(1) }
      45% { transform: translateY(-18px) scale(.45) }
      60% { transform: translateY(-25px) scale(.45) }
      80% { transform: translateY(-25px) scale(.45) }
      100% { transform: translateY(0px) scale(1) }
    }
    @keyframes dot-2-move {
      20% { transform: scale(1) }
      45% { transform: translate(-16px, 12px) scale(.45) }
      60% { transform: translate(-20px, 15px) scale(.45) }
      80% { transform: translate(-20px, 15px) scale(.45) }
      100% { transform: translateY(0px) scale(1) }
    }
    @keyframes dot-1-move {
      20% { transform: scale(1) }
      45% { transform: translate(16px, 12px) scale(.45) }
      60% { transform: translate(20px, 15px) scale(.45) }
      80% { transform: translate(20px, 15px) scale(.45) }
      100% { transform: translateY(0px) scale(1) }
    }
    @keyframes rotate-move {
      55% { transform: translate(-50%, -50%) rotate(0deg) }
      80% { transform: translate(-50%, -50%) rotate(360deg) }
      100% { transform: translate(-50%, -50%) rotate(360deg) }
    }
    .watermark {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: 9999;
      display: none;
      background: repeating-linear-gradient(
        -45deg,
        rgba(255,0,0,0.05),
        rgba(255,0,0,0.05) 10px,
        rgba(255,0,0,0.1) 10px,
        rgba(255,0,0,0.1) 20px
      );
    }
    .watermark-text {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      font-size: 24px;
      font-weight: bold;
      color: rgba(255,0,0,0.7);
      text-align: center;
      width: 90%;
    }
  </style>
</head>
<body>
<div class="container" id="container">
  <div class="dot dot-1"></div>
  <div class="dot dot-2"></div>
  <div class="dot dot-3"></div>
</div>
<div class="watermark" id="watermark">
  <div class="watermark-text">小富富网络提醒你未授权</div>
</div>

<script>
const ALLOWED_DOMAINS = [
  'example.com',
  'xffwz.com',
  'trusted-domain.com'
];

const urlParams = new URLSearchParams(window.location.search);
const encodedParam = urlParams.get('key') || urlParams.get('url') || '';
const targetUrl = atob(encodedParam);
const watermark = document.getElementById('watermark');

if (targetUrl && targetUrl.includes("http")) {
  let isAllowed = false;
  try {
    const domain = new URL(targetUrl).hostname.replace('www.', '');
    isAllowed = ALLOWED_DOMAINS.some(d => 
      domain === d || domain.endsWith(`.${d}`)
    );
  } catch(e) {
    console.error('URL解析错误:', e);
  }

  if (isAllowed) {
    setTimeout(() => {
      document.getElementById("container").style.display = "none";
      window.location.href = targetUrl;
    }, 1500);
  } else {
    watermark.style.display = 'block';
    document.body.style.backgroundColor = '#fff';
    document.getElementById("container").style.display = "none";
    document.body.innerHTML += '<h1 style="text-align:center;margin-top:50px;color:red">未授权的跳转目标</h1>';
  }
} else {
  watermark.style.display = 'block';
  document.body.innerHTML = '<h1 style="text-align:center;margin-top:50px;color:red">无效的跳转URL</h1>';
}
</script>
</body>
</html>
